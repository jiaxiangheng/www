<% include ./include/header.html%>
<div class="row">
    <div class="col-sm-8 col-sm-offset-2">
        <% articles.forEach(function(article){%>
        <div class="media">
            <div class="media-left"><a href=""><img width="70" height="70" src="<%=article.user.avatar%>" class="media-object" alt=""></a></div>
            <div class="media-body">
                <h4 class="media-heading"><a href="/article/detail/<%=article._id%>"><%=article.title%></a></h4>
                <p><%=article.content%></p>
                <p>作者：<%=article.user.username%>&nbsp;&nbsp;|&nbsp;&nbsp;发表时间：<%=article.createAt.toLocaleString()%>&nbsp;&nbsp;|&nbsp;&nbsp;浏览：<%=article.pageView%></p>
            </div>
        </div>
        <%})%>

        <nav>
            <ul class="pagination">
                <%if(pageNum>1){%>
                <li>
                    <a href="/?pageNum=<%=pageNum-1%>" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                <%}%>
                <%if(pageNum>3){%>
                <li><a href="/?pageNum=1">1</a></li>
                <%}%>
                <%if(pageNum>4){%>
                <li><a href="/?pageNum=2">2</a></li>
                <%}%>
                <%if(pageNum>5){%>
                <li><a>...</a></li>
                <%}%>
                <%for(let i=pageNum-2;i<=pageNum+2;i++){%>
                <%if(i>0&&i<totalPages+1){%>
                <li class="<%=i==pageNum?'active':''%>"><a href="/?pageNum=<%=i%>"><%=i%></a></li>
                <%}}%>
                <%if(pageNum<2&&totalPages>4){%>
                <li><a href="/?pageNum=4">4</a></li>
                <%}%>
                <%if(pageNum<3&&totalPages>4){%>
                <li><a href="/?pageNum=5">5</a></li>
                <%}%>
                <%if(pageNum<totalPages){%>
                <li>
                    <a href="/?pageNum=<%=pageNum+1%>" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
                <%}%>
               <span style="height: 34px;width: 80px; text-align: center;line-height: 34px; display: block;float: left;color: #666;">共<%=totalPages%>页</span>
            </ul>
        </nav>

    </div>
</div>
<% include ./include/footer.html%>